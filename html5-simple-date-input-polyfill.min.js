function calendarExtender(e){var t=this;this.theInput=e,this.container=null,this.theCalDiv=null,this.selectedDate=new Date,this.init=function(){this.getDateFromInput(),this.createCal()},this.getDateFromInput=function(){if(this.theInput.value){var e=this.theInput.value.split("-"),t=new Date(e[0],e[1]-1||0,e[2]||1);if(Date.parse(this.theInput.value)&&t.toDateString()!==this.selectedDate.toDateString())return this.selectedDate=t,!0}return!1},this.createCal=function(){this.container=document.createElement("div"),this.container.className="calendarContainer",this.container.style.display="inline-block",this.theInput.parentNode.replaceChild(this.container,this.theInput),this.container.appendChild(this.theInput),this.theCalDiv=document.createElement("div"),this.theCalDiv.className="calendar",this.theCalDiv.style.display="none",this.container.appendChild(this.theCalDiv),this.creathYearAndMonthSelects(),this.createMonthTable(),this.theInput.addEventListener("focus",function(){t.theCalDiv.style.display=""}),this.theInput.addEventListener("mouseup",function(){t.theCalDiv.style.display=""}),this.theInput.addEventListener("mousedown",function(){t.theCalDiv.style.display=""}),this.theInput.addEventListener("keyup",function(){t.getDateFromInput()&&t.updateSelecteds()}),document.addEventListener("click",function(e){e.target.parentNode!==t.container&&e.target.parentNode.parentNode!==t.container&&e.target.parentNode.parentNode!==t.theCalDiv&&(t.theCalDiv.style.display="none")})},this.creathYearAndMonthSelects=function(){var e=this.createRangeSelect((new Date).getFullYear()-80,(new Date).getFullYear()+20,this.selectedDate.getFullYear());e.className="yearSelect",this.theCalDiv.appendChild(e),e.onchange=function(){t.selectedDate.setYear(this.value),t.selectDate(),t.createMonthTable(),t.theInput.focus()};var a=this.createRangeSelect(0,11,this.selectedDate.getMonth(),["January","February","March","April","May","June","July","August","September","October","November","December"]);a.className="monthSelect",this.theCalDiv.appendChild(a),a.onchange=function(){t.selectedDate.setMonth(this.value),t.selectDate(),t.createMonthTable(),t.theInput.focus()}},this.updateSelecteds=function(){this.theCalDiv.querySelector(".yearSelect").value=this.selectedDate.getFullYear(),this.theCalDiv.querySelector(".monthSelect").value=this.selectedDate.getMonth(),this.createMonthTable()},this.createMonthTable=function(){var e=this.selectedDate.getFullYear(),a=this.selectedDate.getMonth(),n=new Date(e,a,1).getDay(),i=new Date(this.selectedDate.getFullYear(),a+1,0).getDate(),l=this.theCalDiv.getElementsByTagName("table");l.length>0&&this.theCalDiv.removeChild(l[0]);var s,h,c=document.createElement("table");c.innerHTML="<tr><th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr>",this.theCalDiv.appendChild(c);for(var r=0;r<i+n;r++)if(r%7==0&&(s=c.insertRow(-1)),h=s.insertCell(-1),r+1>n){var u=r+1-n;h.innerHTML=u,u===this.selectedDate.getDate()&&(h.className="selected"),h.addEventListener("click",function(){t.theCalDiv.querySelector(".selected").className="",this.className="selected",t.selectedDate.setDate(parseInt(this.innerHTML)),t.selectDate(),t.theInput.focus()})}},this.selectDate=function(){var e=this.selectedDate.getMonth()+1;e<10&&(e="0"+e);var t=this.selectedDate.getDate();t<10&&(t="0"+t),this.theInput.value=this.selectedDate.getFullYear()+"-"+e+"-"+t;var a=document.createEvent("Event");a.initEvent("input",!0,!1),this.theInput.dispatchEvent(a)},this.createRangeSelect=function(e,t,a,n){var i,l,s,h=document.createElement("select");for(l=e;l<=t;l++)i=document.createElement("option"),h.appendChild(i),s=n?n[l-e]:l,i.text=s,i.value=l,l===a&&(i.selected=!0);return h},this.init()}function lacksDateInputSupport(){var e=document.createElement("input");e.setAttribute("type","date");return e.setAttribute("value","not-a-date"),"not-a-date"===e.value}function addcalendarExtenderToDateInputs(){var e=document.querySelectorAll("input[type=date]:not(.haveCal)");[].forEach.call(e,function(e){new calendarExtender(e),e.classList.add("haveCal")})}lacksDateInputSupport()&&void 0===window.orientation&&(addcalendarExtenderToDateInputs(),document.querySelector("body").addEventListener("mousedown",function(e){addcalendarExtenderToDateInputs()}));
